<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Create / Edit Survey</title>

  <!-- Styles -->
  <link rel="stylesheet" href="/css/engagementPopup.css" />

  <!-- Scripts -->
  <script src="/js/storage.js"></script>
  <script defer src="/js/engagement/surveyPopup.js"></script>
</head>

<body>
  <div class="popup-wrapper">
    <div class="popup-card">
      <div class="popup-header">
        <h2>ðŸ§© Survey Setup</h2>
      </div>

      <div class="popup-body">
        <form id="surveyForm" class="survey-form">
          <h3 id="formTitle">Create Survey</h3>
          <p class="muted">Complete the survey details below. Once saved, questions cannot be modified after users start
            responding.</p>

          <!-- === Survey Main Fields === -->
          <div class="form-grid">
            <label>Title</label>
            <input type="text" name="title" placeholder="Survey title" required />

            <label>Summary</label>
            <textarea name="summary" placeholder="Brief description" rows="3"></textarea>

            <label>Start Date</label>
            <input type="date" name="startDate" />

            <label>
              <input type="checkbox" name="immediate" /> Immediate start
            </label>

            <label>Deadline</label>
            <input type="date" name="deadlineDate" />
          </div>

          <!-- === Audience + Visibility === -->
          <div class="form-grid">
            <label>Audience (Roles)</label>
            <select id="audience" name="audience" multiple></select>

            <label>Visibility</label>
            <select name="visibility">
              <option value="private">Private</option>
              <option value="public">Public</option>
            </select>

            <label>Shared With (Specific Users)</label>
            <select id="sharedWith" name="sharedWith" multiple></select>
          </div>

          <!-- === Question Builder (create mode only) === -->
          <div id="questionSection">
            <h4>Questions</h4>
            <div id="questionList" class="question-list"></div>
            <button type="button" id="addQuestionBtn" class="btn-secondary">+ Add Question</button>
          </div>

          <!-- === Actions === -->
          <div class="form-actions">
            <button type="submit" class="btn-primary" id="saveBtn">Save Survey</button>
            <button type="button" id="cancelBtn" class="btn-secondary">Cancel</button>
            <button type="button" id="deleteBtn" class="btn-secondary" style="display:none;">Delete</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>

</html>